
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Client Â· FeathersJS</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-feathers-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="local.html" />
    
    
    <link rel="prev" href="server.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../guides/readme.html">
            
                <a href="../../guides/readme.html">
            
                    
                    Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../guides/basics/readme.html">
            
                <a href="../../guides/basics/readme.html">
            
                    
                    The Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../guides/basics/setup.html">
            
                <a href="../../guides/basics/setup.html">
            
                    
                    Setting up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../guides/basics/starting.html">
            
                <a href="../../guides/basics/starting.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../guides/basics/services.html">
            
                <a href="../../guides/basics/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../../guides/basics/hooks.html">
            
                <a href="../../guides/basics/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../../guides/basics/rest.html">
            
                <a href="../../guides/basics/rest.html">
            
                    
                    REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../../guides/basics/databases.html">
            
                <a href="../../guides/basics/databases.html">
            
                    
                    Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../../guides/basics/real-time.html">
            
                <a href="../../guides/basics/real-time.html">
            
                    
                    Real-time APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../../guides/basics/clients.html">
            
                <a href="../../guides/basics/clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../../guides/basics/generator.html">
            
                <a href="../../guides/basics/generator.html">
            
                    
                    The generator (CLI)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../guides/chat/readme.html">
            
                <a href="../../guides/chat/readme.html">
            
                    
                    A Chat Application
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../guides/chat/creating.html">
            
                <a href="../../guides/chat/creating.html">
            
                    
                    Creating the application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../../guides/chat/service.html">
            
                <a href="../../guides/chat/service.html">
            
                    
                    Generating a service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../../guides/chat/authentication.html">
            
                <a href="../../guides/chat/authentication.html">
            
                    
                    Adding authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../../guides/chat/processing.html">
            
                <a href="../../guides/chat/processing.html">
            
                    
                    Processing data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../../guides/chat/frontend.html">
            
                <a href="../../guides/chat/frontend.html">
            
                    
                    Building a frontend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../../guides/chat/testing.html">
            
                <a href="../../guides/chat/testing.html">
            
                    
                    Writing tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../guides/frameworks/readme.html">
            
                <a href="../../guides/frameworks/readme.html">
            
                    
                    Frameworks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../guides/auth/readme.html">
            
                <a href="../../guides/auth/readme.html">
            
                    
                    Authentication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../guides/auth/how-jwt-works.html">
            
                <a href="../../guides/auth/how-jwt-works.html">
            
                    
                    How JWT works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../guides/auth/recipe.express-middleware.html">
            
                <a href="../../guides/auth/recipe.express-middleware.html">
            
                    
                    Recipe: Express middleware (SSR)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../guides/auth/recipe.customize-response.html">
            
                <a href="../../guides/auth/recipe.customize-response.html">
            
                    
                    Recipe: Custom Login Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../guides/auth/recipe.customize-jwt-payload.html">
            
                <a href="../../guides/auth/recipe.customize-jwt-payload.html">
            
                    
                    Recipe: Custom JWT Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../../guides/auth/recipe.mixed-auth.html">
            
                <a href="../../guides/auth/recipe.mixed-auth.html">
            
                    
                    Recipe: Mixed Auth Endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="../../guides/auth/recipe.oauth-basic.html">
            
                <a href="../../guides/auth/recipe.oauth-basic.html">
            
                    
                    Recipe: Basic OAuth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="../../guides/auth/recipe.custom-auth-strategy.html">
            
                <a href="../../guides/auth/recipe.custom-auth-strategy.html">
            
                    
                    Recipe: Custom Auth Strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../guides/advanced/readme.html">
            
                <a href="../../guides/advanced/readme.html">
            
                    
                    Advanced Topics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../guides/advanced/file-uploading.html">
            
                <a href="../../guides/advanced/file-uploading.html">
            
                    
                    Uploading files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../guides/advanced/using-a-view-engine.html">
            
                <a href="../../guides/advanced/using-a-view-engine.html">
            
                    
                    Using a view engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../../guides/advanced/scaling.html">
            
                <a href="../../guides/advanced/scaling.html">
            
                    
                    Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../../guides/advanced/creating-a-plugin.html">
            
                <a href="../../guides/advanced/creating-a-plugin.html">
            
                    
                    Creating a plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Core
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../application.html">
            
                <a href="../application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../services.html">
            
                <a href="../services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../hooks.html">
            
                <a href="../hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../events.html">
            
                <a href="../events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../channels.html">
            
                <a href="../channels.html">
            
                    
                    Channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../errors.html">
            
                <a href="../errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../configuration.html">
            
                <a href="../configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Transports
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../express.html">
            
                <a href="../express.html">
            
                    
                    Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../socketio.html">
            
                <a href="../socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../primus.html">
            
                <a href="../primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Client
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../client.html">
            
                <a href="../client.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../client/rest.html">
            
                <a href="../client/rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../client/socketio.html">
            
                <a href="../client/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../client/primus.html">
            
                <a href="../client/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="server.html">
            
                <a href="server.html">
            
                    
                    Server
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.4.2" data-path="client.html">
            
                <a href="client.html">
            
                    
                    Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="local.html">
            
                <a href="local.html">
            
                    
                    Local
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="jwt.html">
            
                <a href="jwt.html">
            
                    
                    JWT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="oauth1.html">
            
                <a href="oauth1.html">
            
                    
                    OAuth1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="oauth2.html">
            
                <a href="oauth2.html">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../databases/adapters.html">
            
                <a href="../databases/adapters.html">
            
                    
                    Adapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../databases/common.html">
            
                <a href="../databases/common.html">
            
                    
                    Common API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../databases/querying.html">
            
                <a href="../databases/querying.html">
            
                    
                    Querying
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../migrating.html">
            
                <a href="../../migrating.html">
            
                    
                    Migrating
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../SECURITY.html">
            
                <a href="../../SECURITY.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <a target="_blank" href="https://github.com/feathersjs/awesome-feathersjs">
            
                    
                    Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../help/readme.html">
            
                <a href="../../help/readme.html">
            
                    
                    Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../faq/readme.html">
            
                <a href="../../faq/readme.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../contributing/readme.html">
            
                <a href="../../contributing/readme.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../license.html">
            
                <a href="../../license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Client</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
  
                                <h1 id="authentication-client">Authentication Client</h1>
<p><a href="https://www.npmjs.com/package/@feathersjs/authentication-client" target="_blank"><img src="https://img.shields.io/npm/v/@feathersjs/authentication-client.png?style=flat-square" alt="npm version"></a>
<a href="https://github.com/feathersjs/feathers/blob/master/packages/authentication-client/CHANGELOG.md" target="_blank"><img src="https://img.shields.io/badge/changelog-.md-blue.png?style=flat-square" alt="Changelog"></a></p>
<pre><code>npm install @feathersjs/authentication-client --save
</code></pre><p>The <a href="https://github.com/feathersjs/authentication-client" target="_blank">@feathersjs/authentication-client</a> module allows you to easily authenticate against a Feathers server. It is not required, but makes it easier to implement authentication in your client by automatically storing and sending the JWT access token and handling re-authenticating when a websocket disconnects.</p>
<p>This module contains:</p>
<ul>
<li><a href="#configuration">The main entry function</a></li>
<li><a href="#additional-feathersclient-methods">Additional feathersClient methods</a></li>
<li><a href="#hooks">Some helpful hooks</a></li>
</ul>
<h2 id="appconfigureauthoptions">app.configure(auth(options))</h2>
<p>Setup is done the same as all Feathers plugins, using the <code>configure</code> method:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/feathers&apos;</span>);
<span class="hljs-keyword">const</span> socketio = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/socketio-client&apos;</span>);
<span class="hljs-keyword">const</span> io = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;socket.io-client&apos;</span>);
<span class="hljs-keyword">const</span> auth = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/authentication-client&apos;</span>);

<span class="hljs-keyword">const</span> socket = io(<span class="hljs-string">&apos;http://api.feathersjs.com&apos;</span>);
<span class="hljs-keyword">const</span> app = feathers();

<span class="hljs-comment">// Setup the transport (Rest, Socket, etc.) here</span>
app.configure(socketio(socket));

<span class="hljs-comment">// Available options are listed in the &quot;Options&quot; section</span>
app.configure(auth(options))
</code></pre>
<p><strong>&gt; The <a href="../client.html">transports plugins</a> (Rest, Socket, Primus...) must have been initialized previously to the authentication plugin.</strong></p>
<h2 id="options">Options</h2>
<p>The following default options will be mixed in with the settings you pass in when configuring authentication. It will set the mixed options back to to the app so that they are available at any time by <code>app.get(&apos;auth&apos;)</code>. They can all be overridden.</p>
<pre><code class="lang-js">{
  header: <span class="hljs-string">&apos;Authorization&apos;</span>, <span class="hljs-comment">// the default authorization header for REST</span>
  prefix: <span class="hljs-string">&apos;&apos;</span>, <span class="hljs-comment">// if set will add a prefix to the header value. for example if prefix was &apos;JWT&apos; then the header would be &apos;Authorization: JWT eyJ0eXAiOiJKV1QiLCJhbGciOi...&apos;</span>
  path: <span class="hljs-string">&apos;/authentication&apos;</span>, <span class="hljs-comment">// the server-side authentication service path</span>
  jwtStrategy: <span class="hljs-string">&apos;jwt&apos;</span>, <span class="hljs-comment">// the name of the JWT authentication strategy </span>
  entity: <span class="hljs-string">&apos;user&apos;</span>, <span class="hljs-comment">// the entity you are authenticating (ie. a users)</span>
  service: <span class="hljs-string">&apos;users&apos;</span>, <span class="hljs-comment">// the service to look up the entity</span>
  cookie: <span class="hljs-string">&apos;feathers-jwt&apos;</span>, <span class="hljs-comment">// the name of the cookie to parse the JWT from when cookies are enabled server side</span>
  storageKey: <span class="hljs-string">&apos;feathers-jwt&apos;</span>, <span class="hljs-comment">// the key to store the accessToken in localstorage or AsyncStorage on React Native</span>
  storage: <span class="hljs-literal">undefined</span> <span class="hljs-comment">// Passing a WebStorage-compatible object to enable automatic storage on the client.</span>
}
</code></pre>
<p>To enable storing the JWT make sure to provide a <code>storage</code> when configuring the plugin. The following storage options are available:</p>
<ul>
<li><code>window.localStorage</code> in the browser to use the browsers <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank">localStorage</a></li>
<li><a href="https://facebook.github.io/react-native/docs/asyncstorage.html" target="_blank">AsyncStorage</a> for <em>React Native</em></li>
<li><a href="https://www.npmjs.com/package/localforage" target="_blank">localForage</a> which helps deal with older browsers and browsers in Incognito / Private Browsing mode.</li>
<li><a href="https://www.npmjs.com/package/cookie-storage" target="_blank">cookie-storage</a> uses cookies. It can be useful on devices that don&apos;t support <code>localStorage</code>.</li>
</ul>
<h2 id="appauthenticate">app.authenticate()</h2>
<p><code>app.authenticate() -&gt; Promise</code> with no arguments will try to authenticate using the JWT from the <code>storage</code>. This is normally called to either show your application (when successful) or showing a login page or redirecting to the appropriate oAuth link.</p>
<pre><code class="lang-js">app.authenticate().then(() =&gt; {
  <span class="hljs-comment">// show application page</span>
}).catch(() =&gt; {
  <span class="hljs-comment">// show login page</span>
})
</code></pre>
<blockquote>
<p><strong>Important:</strong> <code>app.authenticate()</code> <strong>has</strong> to be called when you want to use the token from storage and <strong>only once</strong> when the application initializes. Once successful, all subsequent requests will send their authentication information automatically.</p>
</blockquote>
<h2 id="appauthenticateoptions">app.authenticate(options)</h2>
<p><code>app.authenticate(options) -&gt; Promise</code> will try to authenticate with a Feathers server by passing a <code>strategy</code> and other properties as credentials. It will use whichever transport has been setup on the client (@feathersjs/rest-client, @feathersjs/socketio-client, or @feathersjs/primus-client).</p>
<pre><code class="lang-js"><span class="hljs-comment">// Authenticate with the local email/password strategy </span>
app.authenticate({
  strategy: <span class="hljs-string">&apos;local&apos;</span>,
  email: <span class="hljs-string">&apos;my@email.com&apos;</span>,
  password: <span class="hljs-string">&apos;my-password&apos;</span>
}).then(() =&gt; {
  <span class="hljs-comment">// Logged in</span>
}).catch(e =&gt; {
  <span class="hljs-comment">// Show login page (potentially with `e.message`)</span>
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;Authentication error&apos;</span>, e);
});

app.authenticate({
  strategy: <span class="hljs-string">&apos;jwt&apos;</span>, 
  accessToken: <span class="hljs-string">&apos;&lt;the.jwt.token.string&gt;&apos;</span>
}).then(() =&gt; {
  <span class="hljs-comment">// JWT authentication successful</span>
}).catch(e =&gt; {
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;Authentication error&apos;</span>, e);
  <span class="hljs-comment">// Show login page</span>
});
</code></pre>
<ul>
<li><code>data {Object}</code> - of the format <code>{strategy [, ...otherProps]}</code><ul>
<li><code>strategy {String}</code> - the name of the strategy to be used to authenticate.  Required.</li>
<li><code>...otherProps {Properties}</code> vary depending on the chosen strategy. Above is an example of using the <code>jwt</code> strategy.  Below is one for the <code>local</code> strategy.</li>
</ul>
</li>
</ul>
<h2 id="applogout">app.logout()</h2>
<p>Removes the JWT accessToken from storage on the client.  It also calls the <code>remove</code> method of the <a href="server.html">/authentication service</a> on the Feathers server.</p>
<h2 id="apppassport">app.passport</h2>
<p><code>app.passport</code> contains helper functions to work with the JWT.</p>
<h3 id="apppassportgetjwt">app.passport.getJWT()</h3>
<p>Pull the JWT from <code>storage</code> or the cookie. Returns a Promise.</p>
<h3 id="apppassportverifyjwttoken">app.passport.verifyJWT(token)</h3>
<p>Verify that a JWT is not expired and decode it to get the payload. Returns a Promise.</p>
<h3 id="apppassportpayloadisvalidtoken">app.passport.payloadIsValid(token)</h3>
<p>Synchronously verify that a token has not expired. Returns a Boolean.</p>
<h2 id="authentication-events">Authentication Events</h2>
<p>On the client authentication events are emitted on the app object whenever a client successfully authenticates or &quot;logs out&quot;.
These events are emitted on the client.</p>
<h2 id="apponauthenticated-callback">app.on(&apos;authenticated&apos;, callback)</h2>
<h2 id="apponlogout-callback">app.on(&apos;logout&apos;, callback)</h2>
<h2 id="apponreauthentication-error-errorhandler">app.on(&apos;reauthentication-error&apos;, errorHandler)</h2>
<p>In the event that your server goes down or the client loses connectivity, it will automatically handle attempting to re-authenticate the socket when the client regains connectivity with the server. In order to handle an authentication failure during automatic re-authentication you need to implement the following event listener:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> errorHandler = error =&gt; {
  app.authenticate({
    strategy: <span class="hljs-string">&apos;local&apos;</span>,
    email: <span class="hljs-string">&apos;admin@feathersjs.com&apos;</span>,
    password: <span class="hljs-string">&apos;admin&apos;</span>
  }).then(response =&gt; {
    <span class="hljs-comment">// You are now authenticated again</span>
  });
};

<span class="hljs-comment">// Handle when auth fails during a reconnect or a transport upgrade</span>
app.on(<span class="hljs-string">&apos;reauthentication-error&apos;</span>, errorHandler)
</code></pre>
<h2 id="hooks">Hooks</h2>
<p>There are 3 hooks. They are really meant for internal use and you shouldn&apos;t need to worry about them very often.</p>
<ul>
<li><code>populateAccessToken</code> - Takes the token and puts in on <code>hooks.params.accessToken</code> in case you need it in one of your client side services or hooks</li>
<li><code>populateHeader</code> - Add the accessToken to the authorization header</li>
<li><code>populateEntity</code> - Experimental. Populate an entity based on the JWT payload.</li>
</ul>
<h2 id="complete-example">Complete Example</h2>
<p>Here&apos;s an example of a Feathers server that uses <code>@feathersjs/authentication-client</code>. </p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/feathers&apos;</span>);
<span class="hljs-keyword">const</span> rest = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/rest-client&apos;</span>);
<span class="hljs-keyword">const</span> auth = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/authentication-client&apos;</span>);

<span class="hljs-keyword">const</span> superagent = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;superagent&apos;</span>);
<span class="hljs-keyword">const</span> localStorage = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;localstorage-memory&apos;</span>);

<span class="hljs-keyword">const</span> feathersClient = feathers();

feathersClient.configure(rest(<span class="hljs-string">&apos;http://localhost:3030&apos;</span>).superagent(superagent))
  .configure(auth({ storage: localStorage }));

feathersClient.authenticate({
  strategy: <span class="hljs-string">&apos;local&apos;</span>,
  email: <span class="hljs-string">&apos;admin@feathersjs.com&apos;</span>,
  password: <span class="hljs-string">&apos;admin&apos;</span>
})
.then(response =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Authenticated!&apos;</span>, response);
  <span class="hljs-keyword">return</span> feathersClient.passport.verifyJWT(response.accessToken);
})
.then(payload =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;JWT Payload&apos;</span>, payload);
  <span class="hljs-keyword">return</span> feathersClient.service(<span class="hljs-string">&apos;users&apos;</span>).get(payload.userId);
})
.then(user =&gt; {
  feathersClient.set(<span class="hljs-string">&apos;user&apos;</span>, user);
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;User&apos;</span>, feathersClient.get(<span class="hljs-string">&apos;user&apos;</span>));
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;Error authenticating!&apos;</span>, error);
});
</code></pre>

                                
  <blockquote>
    <p>
        Is anything wrong, unclear, missing?
        <a target="_blank" href="https://github.com/feathersjs/docs/issues/new?title=Comment: Client (api/authentication/client.md)">Leave a comment</a> or
        <a target="_blank" href="https://github.com/feathersjs/docs/edit/master/api/authentication/client.md">edit this page</a>.
    </p>
  </blockquote>

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="server.html" class="navigation navigation-prev " aria-label="Previous page: Server">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="local.html" class="navigation navigation-next " aria-label="Next page: Local">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Client","level":"1.3.4.2","depth":3,"next":{"title":"Local","level":"1.3.4.3","depth":3,"path":"api/authentication/local.md","ref":"api/authentication/local.md","articles":[]},"previous":{"title":"Server","level":"1.3.4.1","depth":3,"path":"api/authentication/server.md","ref":"api/authentication/server.md","articles":[]},"dir":"ltr"},"config":{"plugins":["feathers-collapsible-menu","heading-anchors","include-codeblock","edit-link","feathers-versions","advanced-emoji","codetabs","livereload"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"livereload":{},"search":{},"codetabs":{},"lunr":{"maxIndexSize":1000000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"heading-anchors":{},"highlight":{},"feathers-versions":{},"versions":{"gitbookConfigURL":"https://rawgit.com/feathersjs/feathers-docs/master/book.json","options":[{"value":"https://crow.docs.feathersjs.com","text":"Next version - Crow"},{"value":"https://docs.feathersjs.com","text":"Latest Stable - Buzzard"},{"value":"https://auk.docs.feathersjs.com","text":"Previous release - Auk"},{"value":"https://legacy.docs.feathersjs.com","text":"Legacy"}]},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/feathersjs/docs/edit/master","placement":"left"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"feathers-collapsible-menu":{},"menu":{"deep":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"FeathersJS","gitbook":"*"},"file":{"path":"api/authentication/client.md","mtime":"2018-10-21T12:11:38.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-21T18:29:49.010Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-versions/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

