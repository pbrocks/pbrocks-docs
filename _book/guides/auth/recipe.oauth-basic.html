
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Recipe: Basic OAuth Â· FeathersJS</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-feathers-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="recipe.custom-auth-strategy.html" />
    
    
    <link rel="prev" href="recipe.mixed-auth.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../basics/readme.html">
            
                <a href="../basics/readme.html">
            
                    
                    The Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../basics/setup.html">
            
                <a href="../basics/setup.html">
            
                    
                    Setting up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../basics/starting.html">
            
                <a href="../basics/starting.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../basics/services.html">
            
                <a href="../basics/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../basics/hooks.html">
            
                <a href="../basics/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../basics/rest.html">
            
                <a href="../basics/rest.html">
            
                    
                    REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../basics/databases.html">
            
                <a href="../basics/databases.html">
            
                    
                    Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../basics/real-time.html">
            
                <a href="../basics/real-time.html">
            
                    
                    Real-time APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../basics/clients.html">
            
                <a href="../basics/clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../basics/generator.html">
            
                <a href="../basics/generator.html">
            
                    
                    The generator (CLI)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../chat/readme.html">
            
                <a href="../chat/readme.html">
            
                    
                    A Chat Application
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../chat/creating.html">
            
                <a href="../chat/creating.html">
            
                    
                    Creating the application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../chat/service.html">
            
                <a href="../chat/service.html">
            
                    
                    Generating a service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../chat/authentication.html">
            
                <a href="../chat/authentication.html">
            
                    
                    Adding authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../chat/processing.html">
            
                <a href="../chat/processing.html">
            
                    
                    Processing data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../chat/frontend.html">
            
                <a href="../chat/frontend.html">
            
                    
                    Building a frontend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../chat/testing.html">
            
                <a href="../chat/testing.html">
            
                    
                    Writing tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../frameworks/readme.html">
            
                <a href="../frameworks/readme.html">
            
                    
                    Frameworks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    Authentication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="how-jwt-works.html">
            
                <a href="how-jwt-works.html">
            
                    
                    How JWT works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="recipe.express-middleware.html">
            
                <a href="recipe.express-middleware.html">
            
                    
                    Recipe: Express middleware (SSR)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="recipe.customize-response.html">
            
                <a href="recipe.customize-response.html">
            
                    
                    Recipe: Custom Login Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="recipe.customize-jwt-payload.html">
            
                <a href="recipe.customize-jwt-payload.html">
            
                    
                    Recipe: Custom JWT Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="recipe.mixed-auth.html">
            
                <a href="recipe.mixed-auth.html">
            
                    
                    Recipe: Mixed Auth Endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.4.6" data-path="recipe.oauth-basic.html">
            
                <a href="recipe.oauth-basic.html">
            
                    
                    Recipe: Basic OAuth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="recipe.custom-auth-strategy.html">
            
                <a href="recipe.custom-auth-strategy.html">
            
                    
                    Recipe: Custom Auth Strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../advanced/readme.html">
            
                <a href="../advanced/readme.html">
            
                    
                    Advanced Topics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../advanced/file-uploading.html">
            
                <a href="../advanced/file-uploading.html">
            
                    
                    Uploading files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../advanced/using-a-view-engine.html">
            
                <a href="../advanced/using-a-view-engine.html">
            
                    
                    Using a view engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../advanced/scaling.html">
            
                <a href="../advanced/scaling.html">
            
                    
                    Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../advanced/creating-a-plugin.html">
            
                <a href="../advanced/creating-a-plugin.html">
            
                    
                    Creating a plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../api/readme.html">
            
                <a href="../../api/readme.html">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Core
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../api/application.html">
            
                <a href="../../api/application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../api/services.html">
            
                <a href="../../api/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../api/hooks.html">
            
                <a href="../../api/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../../api/events.html">
            
                <a href="../../api/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../../api/channels.html">
            
                <a href="../../api/channels.html">
            
                    
                    Channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../../api/errors.html">
            
                <a href="../../api/errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../../api/configuration.html">
            
                <a href="../../api/configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Transports
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../api/express.html">
            
                <a href="../../api/express.html">
            
                    
                    Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../api/socketio.html">
            
                <a href="../../api/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../api/primus.html">
            
                <a href="../../api/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Client
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../api/client.html">
            
                <a href="../../api/client.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../api/client/rest.html">
            
                <a href="../../api/client/rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../api/client/socketio.html">
            
                <a href="../../api/client/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../../api/client/primus.html">
            
                <a href="../../api/client/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../api/authentication/server.html">
            
                <a href="../../api/authentication/server.html">
            
                    
                    Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../../api/authentication/client.html">
            
                <a href="../../api/authentication/client.html">
            
                    
                    Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../../api/authentication/local.html">
            
                <a href="../../api/authentication/local.html">
            
                    
                    Local
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../../api/authentication/jwt.html">
            
                <a href="../../api/authentication/jwt.html">
            
                    
                    JWT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../../api/authentication/oauth1.html">
            
                <a href="../../api/authentication/oauth1.html">
            
                    
                    OAuth1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="../../api/authentication/oauth2.html">
            
                <a href="../../api/authentication/oauth2.html">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../api/databases/adapters.html">
            
                <a href="../../api/databases/adapters.html">
            
                    
                    Adapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../../api/databases/common.html">
            
                <a href="../../api/databases/common.html">
            
                    
                    Common API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../../api/databases/querying.html">
            
                <a href="../../api/databases/querying.html">
            
                    
                    Querying
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../migrating.html">
            
                <a href="../../migrating.html">
            
                    
                    Migrating
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../SECURITY.html">
            
                <a href="../../SECURITY.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <a target="_blank" href="https://github.com/feathersjs/awesome-feathersjs">
            
                    
                    Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../help/readme.html">
            
                <a href="../../help/readme.html">
            
                    
                    Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../faq/readme.html">
            
                <a href="../../faq/readme.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../contributing/readme.html">
            
                <a href="../../contributing/readme.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../license.html">
            
                <a href="../../license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Recipe: Basic OAuth</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
  
                                <h1 id="feathersjs-auth-recipe-set-up-basic-oauth-login">FeathersJS Auth Recipe: Set up Basic OAuth Login</h1>
<p>The Auk release of FeathersJS includes a powerful new <a href="../../api/authentication/server.html">authentication suite</a> built on top of <a href="http://www.passportjs.org/" target="_blank">PassportJS</a>.  This now gives the Feathers community access to hundreds of authentication strategies from the Passport community.  Since many of the Passport strategies are for OAuth, we&apos;ve created two auth plugins, <a href="../../api/authentication/oauth1.html"><code>feathers-authentication-oauth1</code></a> and <a href="../../api/authentication/oauth2.html"><code>feathers-authentication-oauth2</code></a>.  These new plugins use a Passport strategy to allow OAuth logins into your app.</p>
<p>Adding OAuth authentication to your app is a great way to quickly allow users to login.  It allows the user to use an existing Internet account with another service to login to your app.  Among lots of good reasons, it often eliminates the need for the email address verification dance.  This is even more likely for very common OAuth providers, like GitHub, Google, and Facebook.</p>
<p>Simplified login is almost always a good idea, but for many developers implementing OAuth can be difficult.  Let&apos;s take a look at how it works, in general.  After that, we&apos;ll see how the new <a href="../../api/authentication/server.html"><code>feathers-authentication</code></a> server plugin makes it easy to get up and running.</p>
<h2 id="how-oauth-works">How OAuth Works</h2>
<p>There are a couple of different methods you can use to implement OAuth. Here are the basic steps of the flow that the <code>feathers-authentication-oauth1</code> and <code>feathers-authentication-oauth2</code> plugins use.</p>
<ol>
<li>You register your application with the OAuth Provider.  This includes giving the provider a callback URL (more on this later). The provider will give you an app identifier and an app secret.  The secret is basically a special password for your app.</li>
<li>You direct the user&apos;s browser to the OAuth provider&apos;s site, providing the app identifier in the query string.</li>
<li>The content provider uses the app identifier to retrieve information about your app.  That information is then presented to the user with a login form.  The user can grant or deny access to your application.</li>
<li>Upon making a decision, the provider redirects the user&apos;s browser to the callback URL you setup in the first step. It includes a short-lived authorization code in the querystring.</li>
<li>Your server sends a request to the OAuth provider&apos;s server.  It includes the authorization code and the secret.  If the authorization code and secret are valid, the provider returns an OAuth access token to your server.  Some user data can also be sent.</li>
<li>Your server can save the user information into the <code>/users</code> table.  It can also use this access token to make requests to the provider&apos;s API.  This same information can also be sent to the browser for use.</li>
<li>With Feathers, there is an additional step.  After logging in, a JWT access token is stored in a cookie and sent to the browser.  The client uses the JWT to authenticate with the server on subsequent requests.</li>
</ol>
<h2 id="implementing-oauth-with-feathers">Implementing OAuth with Feathers</h2>
<p>The Feathers CLI allows you to easily setup a new application with OAuth.  Here are the steps to generate an application:</p>
<ol>
<li><code>npm install -g @feathersjs/cli</code><br></li>
<li><code>mkdir feathers-demo-oauth; cd feathers-demo-oauth</code><br>
or a folder name you prefer.</li>
<li><code>feathers generate app</code><br>
use the default prompts.</li>
<li><code>feathers generate authentication</code><ul>
<li>Select <code>Facebook</code>, <code>GitHub</code>, or <code>Google</code> when prompted for a provider.<br>
<strong>This guide will show how to use GitHub.</strong></li>
<li>Select the defaults for the remaining prompts.</li>
</ul>
</li>
</ol>
<h2 id="setting-up-the-oauth-provider">Setting up the OAuth Provider</h2>
<p>To setup the provider, you use each provider&apos;s website.  Here are links to common providers:</p>
<ul>
<li><a href="https://developers.facebook.com/docs/apps/register" target="_blank">Facebook</a></li>
<li><a href="https://github.com/settings/developers" target="_blank">GitHub</a></li>
<li><a href="https://developers.google.com/identity/protocols/OAuth2" target="_blank">Google</a></li>
</ul>
<p>Once your app is setup, the OAuth provider will give you a <code>Client ID</code> and <code>Client Secret</code>.</p>
<h2 id="configuring-your-application">Configuring Your Application</h2>
<p>Once you have your app&apos;s <code>Client ID</code> and <code>Client Secret</code>, it&apos;s time to setup the app to communicate with the provider.  Open the <code>default.json</code> configuration file.  The generator added a key to the config for the provider you selected.  The below configuration example has a <code>github</code> config.  Copy over and replace the placeholders with the <code>clientID</code> and <code>clientSecret</code>.</p>
<p><strong>config/default.json</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;localhost&quot;</span>,
  <span class="hljs-string">&quot;port&quot;</span>: <span class="hljs-number">3030</span>,
  <span class="hljs-string">&quot;public&quot;</span>: <span class="hljs-string">&quot;../public/&quot;</span>,
  <span class="hljs-string">&quot;paginate&quot;</span>: {
    <span class="hljs-string">&quot;default&quot;</span>: <span class="hljs-number">10</span>,
    <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">50</span>
  },
  <span class="hljs-string">&quot;authentication&quot;</span>: {
    <span class="hljs-string">&quot;secret&quot;</span>: <span class="hljs-string">&quot;cc71e4f97a80c878491197399aabf74e9c0b115c9f8071e75b306c99c891a54b7171852f8c5508e1fe4dcfaedbb603178b0935261928592e487e628f2f669f3a752f2beb3661b29d521b36c8a39e1be6823c0362df5ef1e212d7f2daae789df1065293b98ec9b43309ffe24dba3a2ec2362c5ce5c9155c6438ec380bc7c56d6a169988c0f6754077c5129e8a0ee5fd85b2182d87f84312387e1bbefebe49ad1bf2dcf783e7d8cbee40272b141358b8e23150eee5ea8fc04b2a0f3d824e7fa9d46c025c619c3281af91b7a19fd760bccedae379b735c85024b25a9c91749935b2f29d5b69b2c1ff29368b4aa9cf426d9960302e5e7b903d53e18ccbe2325cf3b6&quot;</span>,
    <span class="hljs-string">&quot;strategies&quot;</span>: [
      <span class="hljs-string">&quot;jwt&quot;</span>
    ],
    <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/authentication&quot;</span>,
    <span class="hljs-string">&quot;service&quot;</span>: <span class="hljs-string">&quot;users&quot;</span>,
    <span class="hljs-string">&quot;jwt&quot;</span>: {
      <span class="hljs-string">&quot;header&quot;</span>: {
        <span class="hljs-string">&quot;typ&quot;</span>: <span class="hljs-string">&quot;access&quot;</span>
      },
      <span class="hljs-string">&quot;audience&quot;</span>: <span class="hljs-string">&quot;https://yourdomain.com&quot;</span>,
      <span class="hljs-string">&quot;subject&quot;</span>: <span class="hljs-string">&quot;anonymous&quot;</span>,
      <span class="hljs-string">&quot;issuer&quot;</span>: <span class="hljs-string">&quot;feathers&quot;</span>,
      <span class="hljs-string">&quot;algorithm&quot;</span>: <span class="hljs-string">&quot;HS256&quot;</span>,
      <span class="hljs-string">&quot;expiresIn&quot;</span>: <span class="hljs-string">&quot;1d&quot;</span>
    },
    <span class="hljs-string">&quot;github&quot;</span>: {
      <span class="hljs-string">&quot;clientID&quot;</span>: <span class="hljs-string">&quot;your github client id&quot;</span>, <span class="hljs-comment">// Replace this with your app&apos;s Client ID</span>
      <span class="hljs-string">&quot;clientSecret&quot;</span>: <span class="hljs-string">&quot;your github client secret&quot;</span>, <span class="hljs-comment">// Replace this with your app&apos;s Client Secret</span>
      <span class="hljs-string">&quot;callbackURL&quot;</span>: <span class="hljs-string">&quot;/&quot;</span>
    },
    <span class="hljs-string">&quot;cookie&quot;</span>: {
      <span class="hljs-string">&quot;enabled&quot;</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;feathers-jwt&quot;</span>,
      <span class="hljs-string">&quot;httpOnly&quot;</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-string">&quot;secure&quot;</span>: <span class="hljs-literal">false</span>
    }
  },
  <span class="hljs-string">&quot;nedb&quot;</span>: <span class="hljs-string">&quot;../data&quot;</span>
}
</code></pre>
<h2 id="test-login-with-oauth">Test Login with OAuth</h2>
<p>Your app is ready for OAuth logins.  We&apos;ve made it that simple!  Let&apos;s try it out.  Open the file <code>public/index.html</code> and scroll to the bottom.  Add the following code just under the <code>h2</code>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;center-text&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/auth/github&quot;</span>&gt;</span>Login With GitHub<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>Now add the following code to the same page.  The first script tag loads Feathers Client from a CDN.  The second script loads Socket.io.  The third script creates a Feathers Client instance and attempts to authenticate with the JWT strategy upon page load.  The authentication client plugin has been configured with a <code>cookie</code> value of <code>feathers-jwt</code>.</p>
<blockquote>
<p>Note: This code loads the <code>feathers-client</code> package from a CDN.  This is <strong>not</strong> the recommended usage for most apps, but is good for demonstration purposes.  We recommend using a bundler as described in the <a href="../../api/client.html">Feathers Client API docs</a>.</p>
</blockquote>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//unpkg.com/feathers-client@2.0.0/dist/feathers.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//unpkg.com/socket.io-client@1.7.3/dist/socket.io.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// Socket.io is exposed as the `io` global.</span>
  <span class="hljs-keyword">var</span> socket = io(<span class="hljs-string">&apos;http://localhost:3030&apos;</span>, {transports: [<span class="hljs-string">&apos;websocket&apos;</span>]});
  <span class="hljs-comment">// feathers-client is exposed as the `feathers` global.</span>
  <span class="hljs-keyword">var</span> feathersClient = feathers()
    .configure(feathers.hooks())
    .configure(feathers.socketio(socket))
    .configure(feathers.authentication({
      cookie: <span class="hljs-string">&apos;feathers-jwt&apos;</span>
    }));

  feathersClient.authenticate()
    .then(response =&gt; {
      <span class="hljs-built_in">console</span>.info(<span class="hljs-string">&apos;Feathers Client has Authenticated with the JWT access token!&apos;</span>);
      <span class="hljs-built_in">console</span>.log(response);
    })
    .catch(error =&gt; {
      <span class="hljs-built_in">console</span>.info(<span class="hljs-string">&apos;We have not logged in with OAuth, yet.  This means there\&apos;s no cookie storing the accessToken.  As a result, feathersClient.authenticate() failed.&apos;</span>);
      <span class="hljs-built_in">console</span>.log(error);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Now, run the server, open <code>http://localhost:3030</code>.  Before you click the &quot;Login with GitHub&quot; link, open the console.  If you refresh you&apos;ll see the message in the catch block.  Since we haven&apos;t logged in, yet, we don&apos;t have a stored JWT access token.  Now, click the <code>Login with GitHub</code> button.  Assuming you haven&apos;t logged in to Github with this application, before, you&apos;ll see a GitHub login page.  Once you login to GitHub, you&apos;ll be redirected back to <code>http://localhost:3030</code>.  Now, if you look at your console, you should see a success message.</p>
<p>What just happened?  When you clicked on that link, it opened the <code>/auth/github</code> link, which is just a shortcut for redirecting to GitHub with your <code>Client ID</code>.  The entire OAuth process that we described earlier took place.  The browser received a <code>feathers-jwt</code> cookie from the server.  Finally the script that we added in the last step used the <code>feathers-authentication-client</code> to authenticate using the JWT returned from the server.  There were a lot of steps that happened in a very short time.  The best news is that you&apos;re authenticated with OAuth.</p>
<h2 id="wrapping-up">Wrapping Up</h2>
<p>You&apos;ve now seen how OAuth login is greatly simplified with the new Feathers Authentication plugins.  Having plugins built on top of PassportJS allows for a lot of flexibility.  You can now build nearly any authentication experience imaginable.  In the final part of this guide, you were able to authenticate the Feathers client.  Hopefully this will get you started integrating OAuth into your application.</p>

                                
  <blockquote>
    <p>
        Is anything wrong, unclear, missing?
        <a target="_blank" href="https://github.com/feathersjs/docs/issues/new?title=Comment: Recipe: Basic OAuth (guides/auth/recipe.oauth-basic.md)">Leave a comment</a> or
        <a target="_blank" href="https://github.com/feathersjs/docs/edit/master/guides/auth/recipe.oauth-basic.md">edit this page</a>.
    </p>
  </blockquote>

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="recipe.mixed-auth.html" class="navigation navigation-prev " aria-label="Previous page: Recipe: Mixed Auth Endpoints">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="recipe.custom-auth-strategy.html" class="navigation navigation-next " aria-label="Next page: Recipe: Custom Auth Strategies">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Recipe: Basic OAuth","level":"1.2.4.6","depth":3,"next":{"title":"Recipe: Custom Auth Strategies","level":"1.2.4.7","depth":3,"path":"guides/auth/recipe.custom-auth-strategy.md","ref":"guides/auth/recipe.custom-auth-strategy.md","articles":[]},"previous":{"title":"Recipe: Mixed Auth Endpoints","level":"1.2.4.5","depth":3,"path":"guides/auth/recipe.mixed-auth.md","ref":"guides/auth/recipe.mixed-auth.md","articles":[]},"dir":"ltr"},"config":{"plugins":["feathers-collapsible-menu","heading-anchors","include-codeblock","edit-link","feathers-versions","advanced-emoji","codetabs","livereload"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"livereload":{},"search":{},"codetabs":{},"lunr":{"maxIndexSize":1000000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"heading-anchors":{},"highlight":{},"feathers-versions":{},"versions":{"gitbookConfigURL":"https://rawgit.com/feathersjs/feathers-docs/master/book.json","options":[{"value":"https://crow.docs.feathersjs.com","text":"Next version - Crow"},{"value":"https://docs.feathersjs.com","text":"Latest Stable - Buzzard"},{"value":"https://auk.docs.feathersjs.com","text":"Previous release - Auk"},{"value":"https://legacy.docs.feathersjs.com","text":"Legacy"}]},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/feathersjs/docs/edit/master","placement":"left"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"feathers-collapsible-menu":{},"menu":{"deep":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"FeathersJS","gitbook":"*"},"file":{"path":"guides/auth/recipe.oauth-basic.md","mtime":"2018-10-21T12:11:38.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-21T18:29:49.010Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-versions/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

