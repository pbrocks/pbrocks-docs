
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Writing tests Â· FeathersJS</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-feathers-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../frameworks/readme.html" />
    
    
    <link rel="prev" href="frontend.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../basics/readme.html">
            
                <a href="../basics/readme.html">
            
                    
                    The Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../basics/setup.html">
            
                <a href="../basics/setup.html">
            
                    
                    Setting up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../basics/starting.html">
            
                <a href="../basics/starting.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../basics/services.html">
            
                <a href="../basics/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../basics/hooks.html">
            
                <a href="../basics/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../basics/rest.html">
            
                <a href="../basics/rest.html">
            
                    
                    REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../basics/databases.html">
            
                <a href="../basics/databases.html">
            
                    
                    Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../basics/real-time.html">
            
                <a href="../basics/real-time.html">
            
                    
                    Real-time APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../basics/clients.html">
            
                <a href="../basics/clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../basics/generator.html">
            
                <a href="../basics/generator.html">
            
                    
                    The generator (CLI)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    A Chat Application
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="creating.html">
            
                <a href="creating.html">
            
                    
                    Creating the application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="service.html">
            
                <a href="service.html">
            
                    
                    Generating a service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="authentication.html">
            
                <a href="authentication.html">
            
                    
                    Adding authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="processing.html">
            
                <a href="processing.html">
            
                    
                    Processing data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="frontend.html">
            
                <a href="frontend.html">
            
                    
                    Building a frontend
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.6" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Writing tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../frameworks/readme.html">
            
                <a href="../frameworks/readme.html">
            
                    
                    Frameworks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../auth/readme.html">
            
                <a href="../auth/readme.html">
            
                    
                    Authentication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../auth/how-jwt-works.html">
            
                <a href="../auth/how-jwt-works.html">
            
                    
                    How JWT works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../auth/recipe.express-middleware.html">
            
                <a href="../auth/recipe.express-middleware.html">
            
                    
                    Recipe: Express middleware (SSR)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../auth/recipe.customize-response.html">
            
                <a href="../auth/recipe.customize-response.html">
            
                    
                    Recipe: Custom Login Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../auth/recipe.customize-jwt-payload.html">
            
                <a href="../auth/recipe.customize-jwt-payload.html">
            
                    
                    Recipe: Custom JWT Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../auth/recipe.mixed-auth.html">
            
                <a href="../auth/recipe.mixed-auth.html">
            
                    
                    Recipe: Mixed Auth Endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="../auth/recipe.oauth-basic.html">
            
                <a href="../auth/recipe.oauth-basic.html">
            
                    
                    Recipe: Basic OAuth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="../auth/recipe.custom-auth-strategy.html">
            
                <a href="../auth/recipe.custom-auth-strategy.html">
            
                    
                    Recipe: Custom Auth Strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../advanced/readme.html">
            
                <a href="../advanced/readme.html">
            
                    
                    Advanced Topics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../advanced/file-uploading.html">
            
                <a href="../advanced/file-uploading.html">
            
                    
                    Uploading files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../advanced/using-a-view-engine.html">
            
                <a href="../advanced/using-a-view-engine.html">
            
                    
                    Using a view engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../advanced/scaling.html">
            
                <a href="../advanced/scaling.html">
            
                    
                    Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../advanced/creating-a-plugin.html">
            
                <a href="../advanced/creating-a-plugin.html">
            
                    
                    Creating a plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../api/readme.html">
            
                <a href="../../api/readme.html">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Core
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../api/application.html">
            
                <a href="../../api/application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../api/services.html">
            
                <a href="../../api/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../api/hooks.html">
            
                <a href="../../api/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../../api/events.html">
            
                <a href="../../api/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../../api/channels.html">
            
                <a href="../../api/channels.html">
            
                    
                    Channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../../api/errors.html">
            
                <a href="../../api/errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../../api/configuration.html">
            
                <a href="../../api/configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Transports
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../api/express.html">
            
                <a href="../../api/express.html">
            
                    
                    Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../api/socketio.html">
            
                <a href="../../api/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../api/primus.html">
            
                <a href="../../api/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Client
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../api/client.html">
            
                <a href="../../api/client.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../api/client/rest.html">
            
                <a href="../../api/client/rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../api/client/socketio.html">
            
                <a href="../../api/client/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../../api/client/primus.html">
            
                <a href="../../api/client/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../api/authentication/server.html">
            
                <a href="../../api/authentication/server.html">
            
                    
                    Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../../api/authentication/client.html">
            
                <a href="../../api/authentication/client.html">
            
                    
                    Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../../api/authentication/local.html">
            
                <a href="../../api/authentication/local.html">
            
                    
                    Local
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../../api/authentication/jwt.html">
            
                <a href="../../api/authentication/jwt.html">
            
                    
                    JWT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../../api/authentication/oauth1.html">
            
                <a href="../../api/authentication/oauth1.html">
            
                    
                    OAuth1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="../../api/authentication/oauth2.html">
            
                <a href="../../api/authentication/oauth2.html">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../api/databases/adapters.html">
            
                <a href="../../api/databases/adapters.html">
            
                    
                    Adapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../../api/databases/common.html">
            
                <a href="../../api/databases/common.html">
            
                    
                    Common API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../../api/databases/querying.html">
            
                <a href="../../api/databases/querying.html">
            
                    
                    Querying
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../migrating.html">
            
                <a href="../../migrating.html">
            
                    
                    Migrating
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../SECURITY.html">
            
                <a href="../../SECURITY.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <a target="_blank" href="https://github.com/feathersjs/awesome-feathersjs">
            
                    
                    Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../help/readme.html">
            
                <a href="../../help/readme.html">
            
                    
                    Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../faq/readme.html">
            
                <a href="../../faq/readme.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../contributing/readme.html">
            
                <a href="../../contributing/readme.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../license.html">
            
                <a href="../../license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Writing tests</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
  
                                <h1 id="writing-tests">Writing tests</h1>
<p>Every time we generate a hook or service, the generator will also set up a basic <a href="https://mochajs.org/" target="_blank">Mocha</a> test that we can use to implement unit tests for it. In this chapter, we will implement unit tests for our <a href="processing.html">hooks</a> and integration tests for the <code>users</code> and <code>messages</code> <a href="service.html">services</a>.</p>
<p>We can run the <a href="https://eslint.org/" target="_blank">code Linter</a> and Mocha tests with</p>
<pre><code>npm test
</code></pre><p>This will fail initially, since we implemented functionality in our hooks that is not covered by the standard tests. So let&apos;s get those to pass first.</p>
<h2 id="unit-testing-hooks">Unit testing hooks</h2>
<p>The best way to test individual hooks is to set up a dummy Feathers application with some services that return the data we expect and can test against, then register the hooks and make actual service calls to verify that they return what we&apos;d expect.</p>
<p>The first hook we created was for processing new messages. For this hook, we can create a <code>messages</code> dummy custom <a href="../basics/services.html">service</a> that just returns the same data from the <code>create</code> service method. To pretend we are an authenticated user, we have to pass <code>params.user</code>. For this test, this can be a simple JavaScript object with an <code>_id</code>.</p>
<p>Update <code>test/hooks/process-messages.test.js</code> to the following:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/feathers&apos;</span>);
<span class="hljs-keyword">const</span> processMessage = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/hooks/process-message&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;process-message\&apos; hook&apos;</span>, () =&gt; {
  <span class="hljs-keyword">let</span> app;

  beforeEach(() =&gt; {
    <span class="hljs-comment">// Create a new plain Feathers application</span>
    app = feathers();

    <span class="hljs-comment">// Register a dummy custom service that just return the</span>
    <span class="hljs-comment">// message data back</span>
    app.use(<span class="hljs-string">&apos;/messages&apos;</span>, {
      <span class="hljs-keyword">async</span> create(data) {
        <span class="hljs-keyword">return</span> data;
      }
    });

    <span class="hljs-comment">// Register the `processMessage` hook on that service</span>
    app.service(<span class="hljs-string">&apos;messages&apos;</span>).hooks({
      before: {
        create: processMessage()
      }
    });
  });

  it(<span class="hljs-string">&apos;processes the message as expected&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// A user stub with just an `_id`</span>
    <span class="hljs-keyword">const</span> user = { _id: <span class="hljs-string">&apos;test&apos;</span> };
    <span class="hljs-comment">// The service method call `params`</span>
    <span class="hljs-keyword">const</span> params = { user };

    <span class="hljs-comment">// Create a new message with params that contains our user</span>
    <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;messages&apos;</span>).create({
      text: <span class="hljs-string">&apos;Hi there&apos;</span>,
      additional: <span class="hljs-string">&apos;should be removed&apos;</span>
    }, params);

    assert.equal(message.text, <span class="hljs-string">&apos;Hi there&apos;</span>);
    <span class="hljs-comment">// `userId` was set</span>
    assert.equal(message.userId, <span class="hljs-string">&apos;test&apos;</span>);
    <span class="hljs-comment">// `additional` property has been removed</span>
    assert.ok(!message.additional);
  });
});
</code></pre>
<p>We can take a similar approach to test the <code>gravatar</code> hook in <code>test/hooks/gravatar.test.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/feathers&apos;</span>);
<span class="hljs-keyword">const</span> gravatar = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/hooks/gravatar&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;gravatar\&apos; hook&apos;</span>, () =&gt; {
  <span class="hljs-keyword">let</span> app;

  beforeEach(() =&gt; {
    app = feathers();

    <span class="hljs-comment">// A dummy users service for testing</span>
    app.use(<span class="hljs-string">&apos;/users&apos;</span>, {
      <span class="hljs-keyword">async</span> create(data) {
        <span class="hljs-keyword">return</span> data;
      }
    });

    <span class="hljs-comment">// Add the hook to the dummy service</span>
    app.service(<span class="hljs-string">&apos;users&apos;</span>).hooks({
      before: {
        create: gravatar()
      }
    });
  });

  it(<span class="hljs-string">&apos;creates a gravatar link from the users email&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({
      email: <span class="hljs-string">&apos;test@example.com&apos;</span>
    });

    assert.deepEqual(user, {
      email: <span class="hljs-string">&apos;test@example.com&apos;</span>,
      avatar: <span class="hljs-string">&apos;https://s.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=60&apos;</span>
    });
  });
});
</code></pre>
<p>In the tests above, we created a dummy service. But sometimes, we need the full Feathers service functionality. <a href="https://github.com/feathersjs-ecosystem/feathers-memory" target="_blank">feathers-memory</a> is a useful <a href="../basics/databases.html">database adapter</a> that supports the Feathers query syntax (and pagination) but does not require a database server. We can install it as a development dependency:</p>
<pre><code>npm install feathers-memory --save-dev
</code></pre><p>Let&apos;s use it to test the <code>populateUser</code> hook, by updating <code>test/hooks/populate-user.test.js</code> to the following:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> feathers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/feathers&apos;</span>);
<span class="hljs-keyword">const</span> memory = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;feathers-memory&apos;</span>);
<span class="hljs-keyword">const</span> populateUser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/hooks/populate-user&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;populate-user\&apos; hook&apos;</span>, () =&gt; {
  <span class="hljs-keyword">let</span> app, user;

  beforeEach(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Database adapter pagination options</span>
    <span class="hljs-keyword">const</span> options = {
      paginate: {
        <span class="hljs-keyword">default</span>: <span class="hljs-number">10</span>,
        max: <span class="hljs-number">25</span>
      }
    };

    app = feathers();

    <span class="hljs-comment">// Register `users` and `messages` service in-memory</span>
    app.use(<span class="hljs-string">&apos;/users&apos;</span>, memory(options));
    app.use(<span class="hljs-string">&apos;/messages&apos;</span>, memory(options));

    <span class="hljs-comment">// Add the hook to the dummy service</span>
    app.service(<span class="hljs-string">&apos;messages&apos;</span>).hooks({
      after: populateUser()
    });

    <span class="hljs-comment">// Create a new user we can use to test with</span>
    user = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({
      email: <span class="hljs-string">&apos;test@user.com&apos;</span>
    });
  });

  it(<span class="hljs-string">&apos;populates a new message with the user&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;messages&apos;</span>).create({
      text: <span class="hljs-string">&apos;A test message&apos;</span>,
      <span class="hljs-comment">// Set `userId` manually (usually done by `process-message` hook)</span>
      userId: user.id
    });

    <span class="hljs-comment">// Make sure that user got added to the returned message</span>
    assert.deepEqual(message.user, user);
  });
});
</code></pre>
<p>If we now run:</p>
<pre><code>npm test
</code></pre><p>All our tests should pass. Yay!</p>
<blockquote>
<p><strong>Note:</strong> There are some error stacks printed when running the tests. This is normal, they are log entries when running the tests for 404 (Not Found) errors.</p>
</blockquote>
<h2 id="test-database-setup">Test database setup</h2>
<p>When testing database functionality, we want to make sure that the tests use a different database. We can achieve this by creating a new environment configuration in <code>config/test.json</code> with the following content:</p>
<pre><code class="lang-js">{
  <span class="hljs-string">&quot;nedb&quot;</span>: <span class="hljs-string">&quot;../test/data&quot;</span>
}
</code></pre>
<p>This will set up the NeDB database to use <code>test/data</code> as the base directory instead of <code>data/</code> when <code>NODE_ENV</code> is set to <code>test</code>. The same thing can be done with connection strings for other databases.</p>
<p>We also want to make sure that before every test run, the database is cleaned up. To make that possible across platforms, first run:</p>
<pre><code>npm install shx --save-dev
</code></pre><p>Now we can update the <code>script</code> section of <code>package.json</code> to the following:</p>
<pre><code class="lang-js">  <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;npm run eslint &amp;&amp; npm run mocha&quot;</span>,
    <span class="hljs-string">&quot;eslint&quot;</span>: <span class="hljs-string">&quot;eslint src/. test/. --config .eslintrc.json&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;node src/&quot;</span>,
    <span class="hljs-string">&quot;clean&quot;</span>: <span class="hljs-string">&quot;shx rm -rf test/data/&quot;</span>,
    <span class="hljs-string">&quot;mocha&quot;</span>: <span class="hljs-string">&quot;npm run clean &amp;&amp; NODE_ENV=test mocha test/ --recursive --exit&quot;</span>
  }
</code></pre>
<p>On Windows the <code>mocha</code> should look like:</p>
<pre><code>npm run clean &amp; SET NODE_ENV=test&amp; mocha test/ --recursive --exit
</code></pre><p>This will make sure that the <code>test/data</code> folder is removed before every test run and <code>NODE_ENV</code> is set properly.</p>
<h2 id="testing-services">Testing services</h2>
<p>To test the actual <code>messages</code> and <code>users</code> services (with all hooks wired up), we can use any REST API testing tool to make requests and verify that they return correct responses.</p>
<p>But there is a much faster, easier and complete approach. Since everything on top of our own hooks and services is already provided (and tested) by Feathers, we can require the <a href="../../api/application.html">application</a> object using the <a href="../../api/services.html">service methods</a> directly, and &quot;fake&quot; authentication by setting <code>params.user</code> as demonstrated in the hook tests above.</p>
<p>By default, the generator creates a service test file, e.g. <code>test/services/users.test.js</code>, that only tests that the service exists, like this:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/app&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;users\&apos; service&apos;</span>, () =&gt; {
  it(<span class="hljs-string">&apos;registered the service&apos;</span>, () =&gt; {
    <span class="hljs-keyword">const</span> service = app.service(<span class="hljs-string">&apos;users&apos;</span>);

    assert.ok(service, <span class="hljs-string">&apos;Registered the service&apos;</span>);
  });
});
</code></pre>
<p>We can then add similar tests that use the service. Following is an updated <code>test/services/users.test.js</code> that adds two tests. The first verifies that users can be created, the gravatar gets set and the password gets encrypted. The second verifies that the password does not get sent to external requests:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/app&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;users\&apos; service&apos;</span>, () =&gt; {
  it(<span class="hljs-string">&apos;registered the service&apos;</span>, () =&gt; {
    <span class="hljs-keyword">const</span> service = app.service(<span class="hljs-string">&apos;users&apos;</span>);

    assert.ok(service, <span class="hljs-string">&apos;Registered the service&apos;</span>);
  });

  it(<span class="hljs-string">&apos;creates a user, encrypts password and adds gravatar&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({
      email: <span class="hljs-string">&apos;test@example.com&apos;</span>,
      password: <span class="hljs-string">&apos;secret&apos;</span>
    });

    <span class="hljs-comment">// Verify Gravatar has been set as we&apos;d expect</span>
    assert.equal(user.avatar, <span class="hljs-string">&apos;https://s.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=60&apos;</span>);
    <span class="hljs-comment">// Makes sure the password got encrypted</span>
    assert.ok(user.password !== <span class="hljs-string">&apos;secret&apos;</span>);
  });

  it(<span class="hljs-string">&apos;removes password for external requests&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Setting `provider` indicates an external request</span>
    <span class="hljs-keyword">const</span> params = { provider: <span class="hljs-string">&apos;rest&apos;</span> };

    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({
      email: <span class="hljs-string">&apos;test2@example.com&apos;</span>,
      password: <span class="hljs-string">&apos;secret&apos;</span>
    }, params);

    <span class="hljs-comment">// Make sure password has been removed</span>
    assert.ok(!user.password);
  });
});
</code></pre>
<p>We take a similar approach for <code>test/services/messages.test.js</code>. We create a test-specific user from the <code>users</code> service. We then pass it as <code>params.user</code> when creating a new message, and validates that message&apos;s content:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/app&apos;</span>);

describe(<span class="hljs-string">&apos;\&apos;messages\&apos; service&apos;</span>, () =&gt; {
  it(<span class="hljs-string">&apos;registered the service&apos;</span>, () =&gt; {
    <span class="hljs-keyword">const</span> service = app.service(<span class="hljs-string">&apos;messages&apos;</span>);

    assert.ok(service, <span class="hljs-string">&apos;Registered the service&apos;</span>);
  });

  it(<span class="hljs-string">&apos;creates and processes message, adds user information&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Create a new user we can use for testing</span>
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({
      email: <span class="hljs-string">&apos;messagetest@example.com&apos;</span>,
      password: <span class="hljs-string">&apos;supersecret&apos;</span>
    });

    <span class="hljs-comment">// The messages service call params (with the user we just created)</span>
    <span class="hljs-keyword">const</span> params = { user };
    <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;messages&apos;</span>).create({
      text: <span class="hljs-string">&apos;a test&apos;</span>,
      additional: <span class="hljs-string">&apos;should be removed&apos;</span>
    }, params);

    assert.equal(message.text, <span class="hljs-string">&apos;a test&apos;</span>);
    <span class="hljs-comment">// `userId` should be set to passed users it</span>
    assert.equal(message.userId, user._id);
    <span class="hljs-comment">// Additional property has been removed</span>
    assert.ok(!message.additional);
    <span class="hljs-comment">// `user` has been populated</span>
    assert.deepEqual(message.user, user);
  });
});
</code></pre>
<p>Run <code>npm test</code> one more time, to verify that the tests for all our hooks, and the new service tests pass.</p>
<h2 id="clientserver-testing">Client/server testing</h2>
<p>You can write tests which start up both a server for your app, and a Feathers client which your test can use to call the server. Such tests can expose faults in the interaction between the client and the server. They are also useful in testing the authentication of requests from the client. Install it as a development dependency:</p>
<pre><code>npm install @feathersjs/client --save-dev
</code></pre><p>Test <code>test/services/users.test.js</code> from above runs on the server. We convert it, in the following <code>tests/services/client-users.test.js</code>, so the tests are run on the client instead of on the server. This also causes client authentication to be tested.</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;assert&apos;</span>);
<span class="hljs-keyword">const</span> feathersClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;@feathersjs/client&apos;</span>);
<span class="hljs-keyword">const</span> io = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;socket.io-client&apos;</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/app&apos;</span>);

<span class="hljs-keyword">const</span> host = app.get(<span class="hljs-string">&apos;host&apos;</span>);
<span class="hljs-keyword">const</span> port = app.get(<span class="hljs-string">&apos;port&apos;</span>);
<span class="hljs-keyword">const</span> email = <span class="hljs-string">&apos;login@example.com&apos;</span>;
<span class="hljs-keyword">const</span> password = <span class="hljs-string">&apos;login&apos;</span>;

describe(<span class="hljs-string">&apos;\&apos;users\&apos; service - client&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.timeout(<span class="hljs-number">10000</span>);
  <span class="hljs-keyword">let</span> server;
  <span class="hljs-keyword">let</span> client;

  before(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> app.service(<span class="hljs-string">&apos;users&apos;</span>).create({ email, password });

    server = app.listen(port);
    server.on(<span class="hljs-string">&apos;listening&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// eslint-disable-next-line no-console</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Feathers application started on http://%s:%d&apos;</span>, host, port);
    });

    client = <span class="hljs-keyword">await</span> makeClient(host, port, email, password);
  });

  after(() =&gt; {
    client.logout();
    server.close();
  });

  describe(<span class="hljs-string">&apos;Run tests using client and server&apos;</span>, () =&gt; {
    it(<span class="hljs-string">&apos;registered the service&apos;</span>, () =&gt; {
      <span class="hljs-keyword">const</span> service = client.service(<span class="hljs-string">&apos;users&apos;</span>);

      assert.ok(service, <span class="hljs-string">&apos;Registered the service&apos;</span>);
    });

    it(<span class="hljs-string">&apos;creates a user, encrypts password and adds gravatar&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;users&apos;</span>).create({
        email: <span class="hljs-string">&apos;testclient@example.com&apos;</span>,
        password: <span class="hljs-string">&apos;secret&apos;</span>
      });

      <span class="hljs-comment">// Verify Gravatar has been set to what we&apos;d expect</span>
      assert.equal(user.avatar, <span class="hljs-string">&apos;https://s.gravatar.com/avatar/1b9c869fa7a93e59463c31a377fe0cf6?s=60&apos;</span>);
      <span class="hljs-comment">// Makes sure the password got encrypted</span>
      assert.ok(user.password !== <span class="hljs-string">&apos;secret&apos;</span>);
    });

    it(<span class="hljs-string">&apos;removes password for external requests&apos;</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-comment">// Setting `provider` indicates an external request</span>
      <span class="hljs-keyword">const</span> params = { provider: <span class="hljs-string">&apos;rest&apos;</span> };

      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;users&apos;</span>).create({
        email: <span class="hljs-string">&apos;testclient2@example.com&apos;</span>,
        password: <span class="hljs-string">&apos;secret&apos;</span>
      }, params);

      <span class="hljs-comment">// Make sure password has been remove</span>
      assert.ok(!user.password);
    });
  });
});

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeClient</span>(<span class="hljs-params">host, port, email, password</span>) </span>{
  <span class="hljs-keyword">const</span> client = feathersClient();
  <span class="hljs-keyword">const</span> socket = io(<span class="hljs-string">`http://<span class="hljs-subst">${host}</span>:<span class="hljs-subst">${port}</span>`</span>, {
    transports: [<span class="hljs-string">&apos;websocket&apos;</span>], forceNew: <span class="hljs-literal">true</span>, reconnection: <span class="hljs-literal">false</span>, extraHeaders: {}
  });
  client.configure(feathersClient.socketio(socket));
  client.configure(feathersClient.authentication({
    storage: localStorage()
  }));

  <span class="hljs-keyword">await</span> client.authenticate({
    strategy: <span class="hljs-string">&apos;local&apos;</span>,
    email,
    password,
  });

  <span class="hljs-keyword">return</span> client;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">localStorage</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> store = {};

  <span class="hljs-keyword">return</span> {
    setItem (key, value) {
      store[key] = value;
    },
    getItem (key) {
      <span class="hljs-keyword">return</span> store[key];
    },
    removeItem (key) {
      <span class="hljs-keyword">delete</span> store[key];
    }
  };
}
</code></pre>
<p>We first make a call on the <em>server</em> to create a new user. We then start up a server for our app. Finally the function <code>makeClient</code> is called to create a Feathers client and authenticate it using the newly created user.</p>
<p>The individual tests remain unchanged except that the service calls are now make on the client (<code>client.service(...).create</code>) instead of on the server (<code>app.service(...).create</code>).</p>
<p>The <code>describe(&apos;Run tests using client and server&apos;,</code> statement stops a new server and client from being created for each test. This results in the test module running noticeably faster, though the tests are now exposed to potential iteractions. You can remove the statement to isolate the tests from one another.</p>
<h2 id="code-coverage">Code coverage</h2>
<p>Code coverage is a great way to get some insights into how much of our code is actually executed during the tests. Using <a href="https://github.com/gotwarlost/istanbul" target="_blank">Istanbul</a> we can add it easily:</p>
<pre><code>npm install istanbul@1.1.0-alpha.1 --save-dev
</code></pre><p>Now we have to update the <code>script</code> section of our <code>package.json</code> to:</p>
<pre><code class="lang-js">  <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;npm run eslint &amp;&amp; npm run coverage&quot;</span>,
    <span class="hljs-string">&quot;coverage&quot;</span>: <span class="hljs-string">&quot;npm run clean &amp;&amp; NODE_ENV=test istanbul cover node_modules/mocha/bin/_mocha -- test/ --recursive --exit&quot;</span>,
    <span class="hljs-string">&quot;eslint&quot;</span>: <span class="hljs-string">&quot;eslint src/. test/. --config .eslintrc.json --fix&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;node src/&quot;</span>,
    <span class="hljs-string">&quot;clean&quot;</span>: <span class="hljs-string">&quot;shx rm -rf test/data/&quot;</span>,
    <span class="hljs-string">&quot;mocha&quot;</span>: <span class="hljs-string">&quot;npm run clean &amp;&amp; NODE_ENV=test mocha test/ --recursive --exit&quot;</span>
  },
</code></pre>
<p>On Windows, the <code>coverage</code> command looks like this:</p>
<pre><code>npm run clean &amp; SET NODE_ENV=test&amp; istanbul cover node_modules/mocha/bin/_mocha -- test/ --recursive --exit
</code></pre><p>To get more coverage information, add a <code>.istanbul.yml</code> in the main folder:</p>
<pre><code class="lang-yml"><span class="hljs-attr">verbose:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">instrumentation:</span>
<span class="hljs-attr">  root:</span> ./src/
<span class="hljs-attr">reporting:</span>
<span class="hljs-attr">  print:</span> summary
<span class="hljs-attr">  reports:</span>
<span class="hljs-bullet">    -</span> html
<span class="hljs-bullet">    -</span> text
<span class="hljs-bullet">    -</span> lcov
<span class="hljs-attr">  watermarks:</span>
<span class="hljs-attr">    statements:</span> [<span class="hljs-number">70</span>, <span class="hljs-number">90</span>]
<span class="hljs-attr">    lines:</span> [<span class="hljs-number">70</span>, <span class="hljs-number">90</span>]
<span class="hljs-attr">    functions:</span> [<span class="hljs-number">70</span>, <span class="hljs-number">90</span>]
<span class="hljs-attr">    branches:</span> [<span class="hljs-number">70</span>, <span class="hljs-number">90</span>]
</code></pre>
<p>Now run:</p>
<pre><code>npm test
</code></pre><p>This will print out some additional coverage information and put a complete HTML report into the <code>coverage</code> folder.</p>
<h2 id="changing-the-default-test-directory">Changing the default test directory</h2>
<p>To change the default test directory, specify the directory you want in your project&#x2019;s <code>package.json</code> file:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;directories&quot;</span>: {
    <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;server/test/&quot;</span>
  }
}
</code></pre>
<p>Also, don&#x2019;t forget to update your mocha script in your <code>package.json</code> file:</p>
<pre><code class="lang-json">  <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;mocha&quot;</span>: <span class="hljs-string">&quot;mocha server/test/ --recursive --exit&quot;</span>  
  }
</code></pre>
<h2 id="whats-next">What&apos;s next?</h2>
<p>That&#x2019;s it - our chat guide is completed! We now have a fully-tested REST and real-time API, with a plain JavaScript frontend including login and signup. Follow up in the <a href="../../api/readme.html">Feathers API documentation</a> for complete details about using Feathers, or start building your own first Feathers application!</p>

                                
  <blockquote>
    <p>
        Is anything wrong, unclear, missing?
        <a target="_blank" href="https://github.com/pbrocks/docs/issues/new?title=Comment: Writing tests (guides/chat/testing.md)">Leave a comment</a> or
        <a target="_blank" href="https://github.com/pbrocks/docs/edit/master/guides/chat/testing.md">edit this page</a>.
    </p>
  </blockquote>

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="frontend.html" class="navigation navigation-prev " aria-label="Previous page: Building a frontend">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../frameworks/readme.html" class="navigation navigation-next " aria-label="Next page: Frameworks">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Writing tests","level":"1.2.2.6","depth":3,"next":{"title":"Frameworks","level":"1.2.3","depth":2,"path":"guides/frameworks/readme.md","ref":"guides/frameworks/readme.md","articles":[]},"previous":{"title":"Building a frontend","level":"1.2.2.5","depth":3,"path":"guides/chat/frontend.md","ref":"guides/chat/frontend.md","articles":[]},"dir":"ltr"},"config":{"plugins":["feathers-collapsible-menu","heading-anchors","include-codeblock","edit-link","feathers-versions","advanced-emoji","codetabs","livereload"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"livereload":{},"search":{},"codetabs":{},"lunr":{"maxIndexSize":1000000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"heading-anchors":{},"highlight":{},"feathers-versions":{},"versions":{"gitbookConfigURL":"https://rawgit.com/feathersjs/feathers-docs/master/book.json","options":[{"value":"https://crow.docs.paidmembershipspro.com","text":"Next version - Crow"},{"value":"https://docs.paidmembershipspro.com","text":"Latest Stable - Buzzard"},{"value":"https://auk.docs.paidmembershipspro.com","text":"Previous release - Auk"},{"value":"https://legacy.docs.paidmembershipspro.com","text":"Legacy"}]},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/pbrocks/docs/edit/master","placement":"left"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"feathers-collapsible-menu":{},"menu":{"deep":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"FeathersJS","gitbook":"*"},"file":{"path":"guides/chat/testing.md","mtime":"2018-10-21T12:11:38.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-21T18:29:49.010Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-versions/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

