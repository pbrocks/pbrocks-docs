
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Building a frontend Â· FeathersJS</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-feathers-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="testing.html" />
    
    
    <link rel="prev" href="processing.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../readme.html">
            
                <a href="../readme.html">
            
                    
                    Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../basics/readme.html">
            
                <a href="../basics/readme.html">
            
                    
                    The Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../basics/setup.html">
            
                <a href="../basics/setup.html">
            
                    
                    Setting up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../basics/starting.html">
            
                <a href="../basics/starting.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../basics/services.html">
            
                <a href="../basics/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../basics/hooks.html">
            
                <a href="../basics/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../basics/rest.html">
            
                <a href="../basics/rest.html">
            
                    
                    REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../basics/databases.html">
            
                <a href="../basics/databases.html">
            
                    
                    Databases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../basics/real-time.html">
            
                <a href="../basics/real-time.html">
            
                    
                    Real-time APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../basics/clients.html">
            
                <a href="../basics/clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../basics/generator.html">
            
                <a href="../basics/generator.html">
            
                    
                    The generator (CLI)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    A Chat Application
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="creating.html">
            
                <a href="creating.html">
            
                    
                    Creating the application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="service.html">
            
                <a href="service.html">
            
                    
                    Generating a service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="authentication.html">
            
                <a href="authentication.html">
            
                    
                    Adding authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="processing.html">
            
                <a href="processing.html">
            
                    
                    Processing data
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.5" data-path="frontend.html">
            
                <a href="frontend.html">
            
                    
                    Building a frontend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Writing tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../frameworks/readme.html">
            
                <a href="../frameworks/readme.html">
            
                    
                    Frameworks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../auth/readme.html">
            
                <a href="../auth/readme.html">
            
                    
                    Authentication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../auth/how-jwt-works.html">
            
                <a href="../auth/how-jwt-works.html">
            
                    
                    How JWT works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../auth/recipe.express-middleware.html">
            
                <a href="../auth/recipe.express-middleware.html">
            
                    
                    Recipe: Express middleware (SSR)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../auth/recipe.customize-response.html">
            
                <a href="../auth/recipe.customize-response.html">
            
                    
                    Recipe: Custom Login Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../auth/recipe.customize-jwt-payload.html">
            
                <a href="../auth/recipe.customize-jwt-payload.html">
            
                    
                    Recipe: Custom JWT Payload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../auth/recipe.mixed-auth.html">
            
                <a href="../auth/recipe.mixed-auth.html">
            
                    
                    Recipe: Mixed Auth Endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="../auth/recipe.oauth-basic.html">
            
                <a href="../auth/recipe.oauth-basic.html">
            
                    
                    Recipe: Basic OAuth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="../auth/recipe.custom-auth-strategy.html">
            
                <a href="../auth/recipe.custom-auth-strategy.html">
            
                    
                    Recipe: Custom Auth Strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../advanced/readme.html">
            
                <a href="../advanced/readme.html">
            
                    
                    Advanced Topics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../advanced/file-uploading.html">
            
                <a href="../advanced/file-uploading.html">
            
                    
                    Uploading files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../advanced/using-a-view-engine.html">
            
                <a href="../advanced/using-a-view-engine.html">
            
                    
                    Using a view engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../advanced/scaling.html">
            
                <a href="../advanced/scaling.html">
            
                    
                    Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../advanced/creating-a-plugin.html">
            
                <a href="../advanced/creating-a-plugin.html">
            
                    
                    Creating a plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../api/readme.html">
            
                <a href="../../api/readme.html">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Core
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../api/application.html">
            
                <a href="../../api/application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../api/services.html">
            
                <a href="../../api/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../api/hooks.html">
            
                <a href="../../api/hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../../api/events.html">
            
                <a href="../../api/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../../api/channels.html">
            
                <a href="../../api/channels.html">
            
                    
                    Channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../../api/errors.html">
            
                <a href="../../api/errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../../api/configuration.html">
            
                <a href="../../api/configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Transports
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../api/express.html">
            
                <a href="../../api/express.html">
            
                    
                    Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../api/socketio.html">
            
                <a href="../../api/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../api/primus.html">
            
                <a href="../../api/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Client
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../api/client.html">
            
                <a href="../../api/client.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../../api/client/rest.html">
            
                <a href="../../api/client/rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../api/client/socketio.html">
            
                <a href="../../api/client/socketio.html">
            
                    
                    Socket.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../../api/client/primus.html">
            
                <a href="../../api/client/primus.html">
            
                    
                    Primus
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Authentication
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../api/authentication/server.html">
            
                <a href="../../api/authentication/server.html">
            
                    
                    Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../../api/authentication/client.html">
            
                <a href="../../api/authentication/client.html">
            
                    
                    Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../../api/authentication/local.html">
            
                <a href="../../api/authentication/local.html">
            
                    
                    Local
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../../api/authentication/jwt.html">
            
                <a href="../../api/authentication/jwt.html">
            
                    
                    JWT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../../api/authentication/oauth1.html">
            
                <a href="../../api/authentication/oauth1.html">
            
                    
                    OAuth1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="../../api/authentication/oauth2.html">
            
                <a href="../../api/authentication/oauth2.html">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../api/databases/adapters.html">
            
                <a href="../../api/databases/adapters.html">
            
                    
                    Adapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../../api/databases/common.html">
            
                <a href="../../api/databases/common.html">
            
                    
                    Common API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../../api/databases/querying.html">
            
                <a href="../../api/databases/querying.html">
            
                    
                    Querying
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../migrating.html">
            
                <a href="../../migrating.html">
            
                    
                    Migrating
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../SECURITY.html">
            
                <a href="../../SECURITY.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <a target="_blank" href="https://github.com/feathersjs/awesome-feathersjs">
            
                    
                    Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../help/readme.html">
            
                <a href="../../help/readme.html">
            
                    
                    Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../faq/readme.html">
            
                <a href="../../faq/readme.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../contributing/readme.html">
            
                <a href="../../contributing/readme.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../license.html">
            
                <a href="../../license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Building a frontend</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
  
                                <h1 id="building-a-frontend">Building a frontend</h1>
<p>As we have seen in the <a href="../basics/readme.html">basics guide</a>, Feathers works great in the browser and comes with <a href="../basics/clients.html">client services</a> that allow to easily connect to a Feathers server.</p>
<p>In this chapter we will create a real-time chat frontend with signup and login using modern plain JavaScript. As with the <a href="../basics/readme.html">basics guide</a>, it will only work in the latest versions of Chrome, Firefox, Safari and Edge since we won&apos;t be using a transpiler like <a href="http://babeljs.io/" target="_blank">Babel</a>. The final version can be found <a href="https://github.com/feathersjs/feathers-chat/tree/master/public/vanilla" target="_blank">here</a>.</p>
<blockquote>
<p><strong>Note:</strong> We will not be using a frontend framework so we can focus on what Feathers is all about. Feathers is framework agnostic and can be used with any frontend framework like React, VueJS or Angular. For more information see the <a href="../frameworks/readme.html">frameworks section</a>.</p>
</blockquote>
<h2 id="set-up-the-index-page">Set up the index page</h2>
<p>We are already serving the static files in the <code>public</code> folder and have a placeholder page in <code>public/index.html</code>. Let&apos;s update it to the following:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;content-type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span>
      <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vanilla JavaScript Feathers Chat<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;shortcut icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;favicon.ico&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;//cdn.rawgit.com/feathersjs/feathers-chat/v0.2.0/public/base.css&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;//cdn.rawgit.com/feathersjs/feathers-chat/v0.2.0/public/chat.css&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex flex-column&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//unpkg.com/@feathersjs/client@^3.0.0/dist/feathers.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/socket.io/socket.io.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;app.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>This will load our chat CSS style, add a container div <code>#app</code> and load several libraries:</p>
<ul>
<li>The <a href="../basics/clients.html">browser version of Feathers</a> (since we are not using a module loader like Webpack or Browserify)</li>
<li>Socket.io provided by the chat API</li>
<li><a href="https://momentjs.com/" target="_blank">MomentJS</a> to format dates</li>
<li>An <code>app.js</code> for our code to live in</li>
</ul>
<p>Let&#x2019;s create <code>public/app.js</code> where all the following code will live (with each code sample added to the end of that file).</p>
<h2 id="connect-to-the-api">Connect to the API</h2>
<p>We&#x2019;ll start with the most important thing first, the connection to our Feathers API. We already learned how Feathers can be used on the client in the <a href="../basics/readme.html">basics guide</a>. Here, we do pretty much the same thing: Establish a Socket connection and initialize a new Feathers application. We also set up the authentication client for later:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Establish a Socket.io connection</span>
<span class="hljs-keyword">const</span> socket = io();
<span class="hljs-comment">// Initialize our Feathers client application through Socket.io</span>
<span class="hljs-comment">// with hooks and authentication.</span>
<span class="hljs-keyword">const</span> client = feathers();

client.configure(feathers.socketio(socket));
<span class="hljs-comment">// Use localStorage to store our login token</span>
client.configure(feathers.authentication({
  storage: <span class="hljs-built_in">window</span>.localStorage
}));
</code></pre>
<p>This allows us to talk to the chat API through websockets, for real-time updates.</p>
<h2 id="base-and-usermessage-list-html">Base and user/message list HTML</h2>
<p>Next, we have to define some static and dynamic HTML that we can insert into the page when we want to show the login page (which also doubles as the signup page) and the actual chat interface:</p>
<pre><code class="lang-js"><span class="hljs-comment">// Login screen</span>
<span class="hljs-keyword">const</span> loginHTML = <span class="hljs-string">`&lt;main class=&quot;login container&quot;&gt;
  &lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;col-12 col-6-tablet push-3-tablet text-center heading&quot;&gt;
      &lt;h1 class=&quot;font-100&quot;&gt;Log in or signup&lt;/h1&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;col-12 col-6-tablet push-3-tablet col-4-desktop push-4-desktop&quot;&gt;
      &lt;form class=&quot;form&quot;&gt;
        &lt;fieldset&gt;
          &lt;input class=&quot;block&quot; type=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;email&quot;&gt;
        &lt;/fieldset&gt;

        &lt;fieldset&gt;
          &lt;input class=&quot;block&quot; type=&quot;password&quot; name=&quot;password&quot; placeholder=&quot;password&quot;&gt;
        &lt;/fieldset&gt;

        &lt;button type=&quot;button&quot; id=&quot;login&quot; class=&quot;button button-primary block signup&quot;&gt;
          Log in
        &lt;/button&gt;

        &lt;button type=&quot;button&quot; id=&quot;signup&quot; class=&quot;button button-primary block signup&quot;&gt;
          Sign up and log in
        &lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/main&gt;`</span>;

<span class="hljs-comment">// Chat base HTML (without user list and messages)</span>
<span class="hljs-keyword">const</span> chatHTML = <span class="hljs-string">`&lt;main class=&quot;flex flex-column&quot;&gt;
  &lt;header class=&quot;title-bar flex flex-row flex-center&quot;&gt;
    &lt;div class=&quot;title-wrapper block center-element&quot;&gt;
      &lt;img class=&quot;logo&quot; src=&quot;http://feathersjs.com/img/feathers-logo-wide.png&quot;
        alt=&quot;Feathers Logo&quot;&gt;
      &lt;span class=&quot;title&quot;&gt;Chat&lt;/span&gt;
    &lt;/div&gt;
  &lt;/header&gt;

  &lt;div class=&quot;flex flex-row flex-1 clear&quot;&gt;
    &lt;aside class=&quot;sidebar col col-3 flex flex-column flex-space-between&quot;&gt;
      &lt;header class=&quot;flex flex-row flex-center&quot;&gt;
        &lt;h4 class=&quot;font-300 text-center&quot;&gt;
          &lt;span class=&quot;font-600 online-count&quot;&gt;0&lt;/span&gt; users
        &lt;/h4&gt;
      &lt;/header&gt;

      &lt;ul class=&quot;flex flex-column flex-1 list-unstyled user-list&quot;&gt;&lt;/ul&gt;
      &lt;footer class=&quot;flex flex-row flex-center&quot;&gt;
        &lt;a href=&quot;#&quot; id=&quot;logout&quot; class=&quot;button button-primary&quot;&gt;
          Sign Out
        &lt;/a&gt;
      &lt;/footer&gt;
    &lt;/aside&gt;

    &lt;div class=&quot;flex flex-column col col-9&quot;&gt;
      &lt;main class=&quot;chat flex flex-column flex-1 clear&quot;&gt;&lt;/main&gt;

      &lt;form class=&quot;flex flex-row flex-space-between&quot; id=&quot;send-message&quot;&gt;
        &lt;input type=&quot;text&quot; name=&quot;text&quot; class=&quot;flex flex-1&quot;&gt;
        &lt;button class=&quot;button-primary&quot; type=&quot;submit&quot;&gt;Send&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/main&gt;`</span>;

<span class="hljs-comment">// Add a new user to the list</span>
<span class="hljs-keyword">const</span> addUser = user =&gt; {
  <span class="hljs-keyword">const</span> userList = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;.user-list&apos;</span>);

  <span class="hljs-keyword">if</span>(userList) {
    <span class="hljs-comment">// Add the user to the list</span>
    userList.insertAdjacentHTML(<span class="hljs-string">&apos;beforeend&apos;</span>, <span class="hljs-string">`&lt;li&gt;
      &lt;a class=&quot;block relative&quot; href=&quot;#&quot;&gt;
        &lt;img src=&quot;<span class="hljs-subst">${user.avatar}</span>&quot; alt=&quot;&quot; class=&quot;avatar&quot;&gt;
        &lt;span class=&quot;absolute username&quot;&gt;<span class="hljs-subst">${user.email}</span>&lt;/span&gt;
      &lt;/a&gt;
    &lt;/li&gt;`</span>);

    <span class="hljs-comment">// Update the number of users</span>
    <span class="hljs-keyword">const</span> userCount = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&apos;.user-list li&apos;</span>).length;

    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;.online-count&apos;</span>).innerHTML = userCount;
  }
};

<span class="hljs-comment">// Renders a new message and finds the user that belongs to the message</span>
<span class="hljs-keyword">const</span> addMessage = message =&gt; {
  <span class="hljs-comment">// Find the user belonging to this message or use the anonymous user if not found</span>
  <span class="hljs-keyword">const</span> { user = {} } = message;
  <span class="hljs-keyword">const</span> chat = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;.chat&apos;</span>);
  <span class="hljs-comment">// Escape HTML</span>
  <span class="hljs-keyword">const</span> text = message.text
    .replace(<span class="hljs-regexp">/&amp;/g</span>, <span class="hljs-string">&apos;&amp;amp;&apos;</span>)
    .replace(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">&apos;&amp;lt;&apos;</span>).replace(<span class="hljs-regexp">/&gt;/g</span>, <span class="hljs-string">&apos;&amp;gt;&apos;</span>);

  <span class="hljs-keyword">if</span>(chat) {
    chat.insertAdjacentHTML( <span class="hljs-string">&apos;beforeend&apos;</span>, <span class="hljs-string">`&lt;div class=&quot;message flex flex-row&quot;&gt;
      &lt;img src=&quot;<span class="hljs-subst">${user.avatar}</span>&quot; alt=&quot;<span class="hljs-subst">${user.email}</span>&quot; class=&quot;avatar&quot;&gt;
      &lt;div class=&quot;message-wrapper&quot;&gt;
        &lt;p class=&quot;message-header&quot;&gt;
          &lt;span class=&quot;username font-600&quot;&gt;<span class="hljs-subst">${user.email}</span>&lt;/span&gt;
          &lt;span class=&quot;sent-date font-300&quot;&gt;<span class="hljs-subst">${moment(message.createdAt).format(&apos;MMM Do, hh:mm:ss&apos;)}</span>&lt;/span&gt;
        &lt;/p&gt;
        &lt;p class=&quot;message-content font-300&quot;&gt;<span class="hljs-subst">${text}</span>&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;`</span>);

    chat.scrollTop = chat.scrollHeight - chat.clientHeight;
  }
};
</code></pre>
<p>This will add the following variables and functions:</p>
<ul>
<li><code>loginHTML</code> contains some static HTML for the login/signup page</li>
<li><code>chatHTML</code> contains the main chat page content (once a user is logged in)</li>
<li><code>addUser(user)</code> is a function to add a new user to the user list on the left</li>
<li><code>addMessage(message)</code> is a function to add a new message to the list. It will also make sure that we always scroll to the bottom of the message list as messages get added</li>
</ul>
<h2 id="displaying-the-loginsignup-or-chat-page">Displaying the login/signup or chat page</h2>
<p>Next, we&apos;ll add two functions to display the login and chat page, where we&apos;ll also add a list of the 25 newest chat messages and the registered users.</p>
<pre><code class="lang-js"><span class="hljs-comment">// Show the login page</span>
<span class="hljs-keyword">const</span> showLogin = (error = {}) =&gt; {
  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&apos;.login&apos;</span>).length) {
    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;.heading&apos;</span>).insertAdjacentHTML(<span class="hljs-string">&apos;beforeend&apos;</span>, <span class="hljs-string">`&lt;p&gt;There was an error: <span class="hljs-subst">${error.message}</span>&lt;/p&gt;`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;app&apos;</span>).innerHTML = loginHTML;
  }
};

<span class="hljs-comment">// Shows the chat page</span>
<span class="hljs-keyword">const</span> showChat = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;app&apos;</span>).innerHTML = chatHTML;

  <span class="hljs-comment">// Find the latest 25 messages. They will come with the newest first</span>
  <span class="hljs-comment">// which is why we have to reverse before adding them</span>
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;messages&apos;</span>).find({
    query: {
      $sort: { createdAt: <span class="hljs-number">-1</span> },
      $limit: <span class="hljs-number">25</span>
    }
  });

  <span class="hljs-comment">// We want to show the newest message last</span>
  messages.data.reverse().forEach(addMessage);

  <span class="hljs-comment">// Find all users</span>
  <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;users&apos;</span>).find();

  users.data.forEach(addUser);
};
</code></pre>
<ul>
<li><code>showLogin(error)</code> will either show the content of loginHTML or, if the login page is already showing, add an error message. This will happen when you try to log in with invalid credentials or sign up with a user that already exists.</li>
<li><code>showChat()</code> does several things. First, we add the static chatHTML to the page. Then we get the latest 25 messages from the messages Feathers service (this is the same as the <code>/messages</code> endpoint of our chat API) using the Feathers query syntax. Since the list will come back with the newest message first, we need to reverse the data. Then we add each message by calling our <code>addMessage</code> function so that it looks like a chat app should&#x200A;&#x2014;&#x200A;with old messages getting older as you scroll up. After that we get a list of all registered users to show them in the sidebar by calling addUser.</li>
</ul>
<h2 id="login-and-signup">Login and signup</h2>
<p>Alright. Now we can show the login page (including an error message when something goes wrong) and if we are logged in call the <code>showChat</code> we defined above. We&#x2019;ve built out the UI, now we have to add the functionality to actually allow people to sign up, log in and also log out.</p>
<pre><code class="lang-js"><span class="hljs-comment">// Retrieve email/password object from the login/signup page</span>
<span class="hljs-keyword">const</span> getCredentials = () =&gt; {
  <span class="hljs-keyword">const</span> user = {
    email: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;[name=&quot;email&quot;]&apos;</span>).value,
    password: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;[name=&quot;password&quot;]&apos;</span>).value
  };

  <span class="hljs-keyword">return</span> user;
};

<span class="hljs-comment">// Log in either using the given email/password or the token from storage</span>
<span class="hljs-keyword">const</span> login = <span class="hljs-keyword">async</span> credentials =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span>(!credentials) {
      <span class="hljs-comment">// Try to authenticate using the JWT from localStorage</span>
      <span class="hljs-keyword">await</span> client.authenticate();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// If we get login information, add the strategy we want to use for login</span>
      <span class="hljs-keyword">const</span> payload = <span class="hljs-built_in">Object</span>.assign({ strategy: <span class="hljs-string">&apos;local&apos;</span> }, credentials);

      <span class="hljs-keyword">await</span> client.authenticate(payload);
    }

    <span class="hljs-comment">// If successful, show the chat page</span>
    showChat();
  } <span class="hljs-keyword">catch</span>(error) {
    <span class="hljs-comment">// If we got an error, show the login page</span>
    showLogin(error);
  }
};

<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&apos;click&apos;</span>, <span class="hljs-keyword">async</span> ev =&gt; {
  <span class="hljs-keyword">switch</span>(ev.target.id) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;signup&apos;</span>: {
    <span class="hljs-comment">// For signup, create a new user and then log them in</span>
    <span class="hljs-keyword">const</span> credentials = getCredentials();

    <span class="hljs-comment">// First create the user</span>
    <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;users&apos;</span>).create(credentials);
    <span class="hljs-comment">// If successful log them in</span>
    <span class="hljs-keyword">await</span> login(credentials);

    <span class="hljs-keyword">break</span>;
  }
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;login&apos;</span>: {
    <span class="hljs-keyword">const</span> user = getCredentials();

    <span class="hljs-keyword">await</span> login(user);

    <span class="hljs-keyword">break</span>;
  }
  <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;logout&apos;</span>: {
    <span class="hljs-keyword">await</span> client.logout();

    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;app&apos;</span>).innerHTML = loginHTML;

    <span class="hljs-keyword">break</span>;
  }
  }
});
</code></pre>
<ul>
<li><code>getCredentials()</code> gets us the values of the username (email) and password fields from the login/signup page to be used directly with Feathers authentication.</li>
<li><code>login(credentials)</code> will either authenticate the credentials returned by getCredentials against our Feathers API using the local authentication strategy (e.g. username and password) or, if no credentials are given, try and use the JWT stored in localStorage. This will try and get the JWT from localStorage first where it is put automatically once you log in successfully so that we don&#x2019;t have to log in every time we visit the chat. Only if that doesn&#x2019;t work it will show the login page. Finally, if the login was successful it will show the chat page.</li>
<li>We also added click event listeners for three buttons. <code>#login</code> will get the credentials and just log in with those. Clicking <code>#signup</code> will signup and log in at the same time. It will first create a new user on our API and then log in with that same user information. Finally, <code>#logout</code> will forget the JWT and then show the login page again.</li>
</ul>
<h2 id="real-time-and-sending-messages">Real-time and sending messages</h2>
<p>In the last step we will add functionality to send new message and make the user and message list update in real-time.</p>
<pre><code class="lang-js"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&apos;submit&apos;</span>, <span class="hljs-keyword">async</span> ev =&gt; {
  <span class="hljs-keyword">if</span>(ev.target.id === <span class="hljs-string">&apos;send-message&apos;</span>) {
    <span class="hljs-comment">// This is the message text input field</span>
    <span class="hljs-keyword">const</span> input = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;[name=&quot;text&quot;]&apos;</span>);

    ev.preventDefault();

    <span class="hljs-comment">// Create a new message and then clear the input field</span>
    <span class="hljs-keyword">await</span> client.service(<span class="hljs-string">&apos;messages&apos;</span>).create({
      text: input.value
    });

    input.value = <span class="hljs-string">&apos;&apos;</span>;
  }
});

<span class="hljs-comment">// Listen to created events and add the new message in real-time</span>
client.service(<span class="hljs-string">&apos;messages&apos;</span>).on(<span class="hljs-string">&apos;created&apos;</span>, addMessage);

<span class="hljs-comment">// We will also see when new users get created in real-time</span>
client.service(<span class="hljs-string">&apos;users&apos;</span>).on(<span class="hljs-string">&apos;created&apos;</span>, addUser);

login();
</code></pre>
<ul>
<li>The <code>#submit</code> button event listener gets the message text from the input field, creates a new message on the messages service and then clears out the field.</li>
<li>Next, we added two <code>created</code> event listeners. One for <code>messages</code> which calls the <code>addMessage</code> function to add the new message to the list and one for <code>users</code> which adds the user to the list via <code>addUser</code>. This is how Feathers does real-time and everything we need to do in order to get everything to update automatically.</li>
<li>To kick our application off, we call <code>login()</code> which as mentioned above will either show the chat application right away (if we signed in before and the token isn&#x2019;t expired) or the login page.</li>
</ul>
<h2 id="whats-next">What&apos;s next?</h2>
<p>That&#x2019;s it. We now have a plain JavaScript real-time chat frontend with login and signup. This example demonstrates many of the core principles of how you interact with a Feathers API. </p>
<p>If you run into an issue, remember you can find a complete working example <a href="https://github.com/feathersjs/feathers-chat" target="_blank">here</a>.</p>
<p>In the final chapter, we&apos;ll look at <a href="testing.html">how to write automated tests for our API</a>.</p>

                                
  <blockquote>
    <p>
        Is anything wrong, unclear, missing?
        <a target="_blank" href="https://github.com/feathersjs/docs/issues/new?title=Comment: Building a frontend (guides/chat/frontend.md)">Leave a comment</a> or
        <a target="_blank" href="https://github.com/feathersjs/docs/edit/master/guides/chat/frontend.md">edit this page</a>.
    </p>
  </blockquote>

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="processing.html" class="navigation navigation-prev " aria-label="Previous page: Processing data">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="testing.html" class="navigation navigation-next " aria-label="Next page: Writing tests">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Building a frontend","level":"1.2.2.5","depth":3,"next":{"title":"Writing tests","level":"1.2.2.6","depth":3,"path":"guides/chat/testing.md","ref":"guides/chat/testing.md","articles":[]},"previous":{"title":"Processing data","level":"1.2.2.4","depth":3,"path":"guides/chat/processing.md","ref":"guides/chat/processing.md","articles":[]},"dir":"ltr"},"config":{"plugins":["feathers-collapsible-menu","heading-anchors","include-codeblock","edit-link","feathers-versions","advanced-emoji","codetabs","livereload"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"livereload":{},"search":{},"codetabs":{},"lunr":{"maxIndexSize":1000000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"heading-anchors":{},"highlight":{},"feathers-versions":{},"versions":{"gitbookConfigURL":"https://rawgit.com/feathersjs/feathers-docs/master/book.json","options":[{"value":"https://crow.docs.feathersjs.com","text":"Next version - Crow"},{"value":"https://docs.feathersjs.com","text":"Latest Stable - Buzzard"},{"value":"https://auk.docs.feathersjs.com","text":"Previous release - Auk"},{"value":"https://legacy.docs.feathersjs.com","text":"Legacy"}]},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":false,"fixlang":false,"lang":"","template":"default","theme":"chrome","unindent":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/feathersjs/docs/edit/master","placement":"left"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"feathers-collapsible-menu":{},"menu":{"deep":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"FeathersJS","gitbook":"*"},"file":{"path":"guides/chat/frontend.md","mtime":"2018-10-21T12:11:38.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-21T18:29:49.010Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-feathers-versions/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

